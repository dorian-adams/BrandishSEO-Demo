{% extends "core/base.html" %}
{% load static %}
{% block head %}
<!-- Meta title -->
<title>Free On-Site Optimization Tool by BrandishSEO</title>
<!-- Meta description -->
<meta name="description" content="" />
{% endblock head %}

{% block content %}
    <section class="slice slice-lg py-7 bg-cover bg-size--cover" style="background-image: url({% static 'img/backgrounds/code.jpg' %});">
        <span class="mask bg-dark opacity-8"></span>
        <div class="container d-flex align-items-center" data-offset-top="#navbar-main">
            <div class="col py-5">
                <div class="row align-items-center justify-content-center">
                    <div class="col-md-7 col-lg-7 text-center">
                        <h1 class="display-4 text-white mb-2"><strong>BrandishSEO</strong> Optimization Tool</h1>
                        <span class="text-white text-sm">Quick and powerful on-page SEO analysis, free</span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="slice slice-lg bg-section-secondary" id="sct-form-contact">
        <div class="container position-relative zindex-100">
            <div class="row justify-content-center mb-5">
                <div class="col-lg-6 text-center">
                    <h3>Free SEO Metrics</h3>
                    <p class="lh-190">Input webpage url and target keyword for a free SEO report.</p>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-lg-6">
                    <!-- Form -->
                    <form id="form-contact" action="{% url 'tools:seo_tools' %}" method="post">
                        {% csrf_token %}
                        <div class="form-group">
                            <input class="form-control form-control-lg" type="text" name="website" placeholder="Enter page url..." required>
                        </div>
                        <div class="form-group">
                            <input class="form-control form-control-lg" type="text" name="keyword" placeholder="Enter target keyword..." required></input>
                        </div>
                        <div class="text-center">
                            <!-- <div class="g-recaptcha" data-sitekey="6Lfs5ScUAAAAANAJwGrdfvWLFRRiVbKRE2vfoaFj"></div> -->
                            <button type="reset" class="btn-reset d-none"></button>
                            <button type="submit" class="btn btn-block btn-lg btn-primary mt-4">Analyze!</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
    {% if analysis %}
    <!-- Board -->
    <section class="slice py-5 bg-section-secondary">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="row align-items-center mb-4">
                        <div class="col">
                            <!-- Title -->
                            <h1 class="h4 mb-0">
                                Results
                            </h1>
                        </div>
                    </div>
                    <div class="row mx-n2">
                        <!-- Task Preview Block -->
                        <div class="col-lg-4 px-2">
                            <div class="card">
                                <div class="card-body">
                                    <!-- Optimized or Errors image -->
                                    {% if errors.h1_tasks %}
                                    <div class="icon">
                                        <img src="{% static 'img/svg/icons/exclamation-triangle.svg' %}" class="img-fluid" alt="Illustration" style="height: 20px;" />
                                    </div>
                                        <!-- Title -->
                                        <a href="#" class="d-block h5 mt-3">H1 Tag</a>
                                        <!-- Detail Errors -->
                                        <p class="text-sm text-muted">
                                            H1 Tags require optimization. See tasks below for more details.
                                        </p>
                                    {% else %}
                                    <div class="icon">
                                        <img src="{% static 'img/svg/icons/check-square.svg' %}" class="img-fluid" alt="Illustration" style="height: 20px;" />
                                    </div>
                                        <a href="#" class="d-block h5 mt-3">H1 Tag</a>
                                        <!-- Detail Errors -->
                                        <p class="text-sm text-muted">
                                            Congrats! Your H1 tags are properly optimized!
                                        </p>
                                    {% endif %}
                                    <!-- Info -->
                                    <div class="row align-items-center mt-4">
                                        <div class="col-6">
                                            <a href="#" class="btn btn-sm btn-primary">{{ errors.h1_tasks|length }} Tasks</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- End Block -->
                        <!-- Task Preview Block -->
                        <div class="col-lg-4 px-2">
                            <div class="card">
                                <div class="card-body">
                                    <!-- Optimized or Errors image -->
                                    {% if errors.meta_title_tasks %}
                                    <div class="icon">
                                        <img src="{% static 'img/svg/icons/exclamation-triangle.svg' %}" class="img-fluid" alt="Illustration" style="height: 20px;" />
                                    </div>
                                        <!-- Title -->
                                        <a href="#" class="d-block h5 mt-3">Meta Titles</a>
                                        <!-- Detail Errors -->
                                        <p class="text-sm text-muted">
                                            Meta title requires optimization. See tasks below for more details.
                                        </p>
                                    {% else %}
                                    <div class="icon">
                                        <img src="{% static 'img/svg/icons/check-square.svg' %}" class="img-fluid" alt="Illustration" style="height: 20px;" />
                                    </div>
                                        <a href="#" class="d-block h5 mt-3">Meta Title</a>
                                        <!-- Detail Errors -->
                                        <p class="text-sm text-muted">
                                            Congrats! Your meta title is properly optimized!
                                        </p>
                                    {% endif %}
                                    <!-- Info -->
                                    <div class="row align-items-center mt-4">
                                        <div class="col-6">
                                            <a href="#" class="btn btn-sm btn-primary">{{ errors.meta_title_tasks|length }} Tasks</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- End Block -->
                        <div class="col-lg-4 px-2">
                            <div class="card">
                                <div class="card-body">
                                    <!-- Optimized or Errors image -->
                                    {% if errors.broken_link_tasks %}
                                    <div class="icon">
                                        <img src="{% static 'img/svg/icons/exclamation-triangle.svg' %}" class="img-fluid" alt="Illustration" style="height: 20px;" />
                                    </div>
                                        <!-- Title -->
                                        <a href="#" class="d-block h5 mt-3">Broken Links</a>
                                        <!-- Detail Errors -->
                                        <p class="text-sm text-muted">
                                            Broken links detected. See tasks below for more details.
                                        </p>
                                    {% else %}
                                    <div class="icon">
                                        <img src="{% static 'img/svg/icons/check-square.svg' %}" class="img-fluid" alt="Illustration" style="height: 20px;" />
                                    </div>
                                        <a href="#" class="d-block h5 mt-3">Broken Links</a>
                                        <!-- Detail Errors -->
                                        <p class="text-sm text-muted">
                                            Congrats! Your links are all working, and do not require attention.
                                        </p>
                                    {% endif %}
                                    <!-- Info -->
                                    <div class="row align-items-center mt-4">
                                        <div class="col-6">
                                            <a href="#" class="btn btn-sm btn-primary">{{ errors.broken_link_tasks|length }} Tasks</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 px-2">
                            <div class="card">
                                <div class="card-body">
                                    <!-- Optimized or Errors image -->
                                    {% if errors.meta_description_tasks %}
                                    <div class="icon">
                                        <img src="{% static 'img/svg/icons/exclamation-triangle.svg' %}" class="img-fluid" alt="Illustration" style="height: 20px;" />
                                    </div>
                                        <!-- Title -->
                                        <a href="#" class="d-block h5 mt-3">Meta Description</a>
                                        <!-- Detail Errors -->
                                        <p class="text-sm text-muted">
                                            Meta description requires optimization. See tasks below for more details.
                                        </p>
                                    {% else %}
                                    <div class="icon">
                                        <img src="{% static 'img/svg/icons/check-square.svg' %}" class="img-fluid" alt="Illustration" style="height: 20px;" />
                                    </div>
                                        <a href="#" class="d-block h5 mt-3">Meta Description</a>
                                        <!-- Detail Errors -->
                                        <p class="text-sm text-muted">
                                            Congrats! Your meta description is optimized and does not require attention.
                                        </p>
                                    {% endif %}
                                    <!-- Info -->
                                    <div class="row align-items-center mt-4">
                                        <div class="col-6">
                                            <a href="#" class="btn btn-sm btn-primary">{{ errors.meta_description_tasks|length }} Tasks</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row align-items-center mb-4">
                        <div class="col">
                            <!-- Title -->
                            <h1 class="h4 mb-0">
                                Optimization Tasks
                            </h1>
                        </div>
                    </div>
                    {% for key, item in errors.items %}
                    {% for error in item %}
                    <div id="accordion-1" class="accordion accordion-stacked">
                        <div class="card">
                            <div class="card-header d-flex align-items-center flex-wrap flex-lg-nowrap py-4" id="heading-{{ forloop.parentloop.counter }}-{{ forloop.counter }}" data-toggle="collapse" role="button" data-target="#collapse-{{ forloop.parentloop.counter }}-{{ forloop.counter }}" aria-expanded="false" aria-controls="collapse-{{ forloop.parentloop.counter }}-{{ forloop.counter }}">
                                <div class="col-sm-auto">
                                    <i data-feather="alert-circle" class="mr-3"></i>
                                    <span class="h6 text-sm-auto"><strong>{{ error.type }} - </strong></span>
                                </div>
                                <div class="col-sm-auto">
                                    <span class="h6 text-sm-auto text-limit">&nbsp;{{ error.solution|truncatechars:40 }}</span>
                                </div>
                            </div>
                            <div id="collapse-{{ forloop.parentloop.counter }}-{{ forloop.counter }}" class="collapse" aria-labelledby="heading-{{ forloop.parentloop.counter }}-{{ forloop.counter }}" data-parent="#accordion-1">
                                <div class="card-body">
                                    <p><strong>Error: </strong>{{ error.error }}</p>
                                    <p><strong>Solution: </strong>{{ error.solution }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
    {% endif %}
{% endblock content %}